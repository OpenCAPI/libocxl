<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libocxl: OpenCAPI IRQ Functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libocxl
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">OpenCAPI IRQ Functions</div>  </div>
</div><!--header-->
<div class="contents">

<p>These functions allow the allocation and handling of AFU IRQs.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gaeef45c328e1d09ae54ab81212c858466"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="group__ocxl__irq.html#gaeef45c328e1d09ae54ab81212c858466">ocxl_kernel_event_header</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ocxl__irq.html#gaeef45c328e1d09ae54ab81212c858466">ocxl_kernel_event_header</a></td></tr>
<tr class="separator:gaeef45c328e1d09ae54ab81212c858466"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8d95bfe544a88c1a07c0a8c407db60ed"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="group__ocxl__irq.html#ga8d95bfe544a88c1a07c0a8c407db60ed">ocxl_kernel_event_xsl_fault_error</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ocxl__irq.html#ga8d95bfe544a88c1a07c0a8c407db60ed">ocxl_kernel_event_xsl_fault_error</a></td></tr>
<tr class="separator:ga8d95bfe544a88c1a07c0a8c407db60ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga9985bc24e0893f4a57730d9582d79609"><td class="memItemLeft" align="right" valign="top"><a class="el" href="libocxl_8h.html#a0a18f33ce24edf75b02184395bb6ea55">ocxl_err</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ocxl__irq.html#ga9985bc24e0893f4a57730d9582d79609">ocxl_irq_alloc</a> (<a class="el" href="libocxl_8h.html#a21bfdc5f2f8df75e22bf12441644d8fb">ocxl_afu_h</a> afu, void *info, <a class="el" href="libocxl_8h.html#a313387f055a40694c72d5eb1eeb2fe85">ocxl_irq_h</a> *irq)</td></tr>
<tr class="memdesc:ga9985bc24e0893f4a57730d9582d79609"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate an IRQ for an open AFU.  <a href="#ga9985bc24e0893f4a57730d9582d79609">More...</a><br /></td></tr>
<tr class="separator:ga9985bc24e0893f4a57730d9582d79609"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4e83b092e7905f25ec39f80370248c61"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ocxl__irq.html#ga4e83b092e7905f25ec39f80370248c61">ocxl_irq_get_handle</a> (<a class="el" href="libocxl_8h.html#a21bfdc5f2f8df75e22bf12441644d8fb">ocxl_afu_h</a> afu, <a class="el" href="libocxl_8h.html#a313387f055a40694c72d5eb1eeb2fe85">ocxl_irq_h</a> irq)</td></tr>
<tr class="memdesc:ga4e83b092e7905f25ec39f80370248c61"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the 64 bit IRQ handle for an IRQ.  <a href="#ga4e83b092e7905f25ec39f80370248c61">More...</a><br /></td></tr>
<tr class="separator:ga4e83b092e7905f25ec39f80370248c61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaab619addebe00f3e8ba66e3b8b72dd8d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ocxl__irq.html#gaab619addebe00f3e8ba66e3b8b72dd8d">ocxl_irq_get_fd</a> (<a class="el" href="libocxl_8h.html#a21bfdc5f2f8df75e22bf12441644d8fb">ocxl_afu_h</a> afu, <a class="el" href="libocxl_8h.html#a313387f055a40694c72d5eb1eeb2fe85">ocxl_irq_h</a> irq)</td></tr>
<tr class="memdesc:gaab619addebe00f3e8ba66e3b8b72dd8d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the file descriptor associated with an IRQ.  <a href="#gaab619addebe00f3e8ba66e3b8b72dd8d">More...</a><br /></td></tr>
<tr class="separator:gaab619addebe00f3e8ba66e3b8b72dd8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab33cf0e3d48650e6043239c38e0792a8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ocxl__irq.html#gab33cf0e3d48650e6043239c38e0792a8">ocxl_afu_get_event_fd</a> (<a class="el" href="libocxl_8h.html#a21bfdc5f2f8df75e22bf12441644d8fb">ocxl_afu_h</a> afu)</td></tr>
<tr class="memdesc:gab33cf0e3d48650e6043239c38e0792a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a descriptor that will trigger a poll when an AFU event occurs.  <a href="#gab33cf0e3d48650e6043239c38e0792a8">More...</a><br /></td></tr>
<tr class="separator:gab33cf0e3d48650e6043239c38e0792a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1b9b44339bdb8b94f750bca360c9d679"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ocxl__irq.html#ga1b9b44339bdb8b94f750bca360c9d679">ocxl_afu_event_check_versioned</a> (<a class="el" href="libocxl_8h.html#a21bfdc5f2f8df75e22bf12441644d8fb">ocxl_afu_h</a> afu, int timeout, <a class="el" href="libocxl_8h.html#structocxl__event">ocxl_event</a> *events, uint16_t event_count, uint16_t event_api_version)</td></tr>
<tr class="memdesc:ga1b9b44339bdb8b94f750bca360c9d679"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check for pending IRQs and other events.  <a href="#ga1b9b44339bdb8b94f750bca360c9d679">More...</a><br /></td></tr>
<tr class="separator:ga1b9b44339bdb8b94f750bca360c9d679"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga394155027d19c0646b691080695a92ef"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ocxl__irq.html#ga394155027d19c0646b691080695a92ef">ocxl_afu_event_check</a> (<a class="el" href="libocxl_8h.html#a21bfdc5f2f8df75e22bf12441644d8fb">ocxl_afu_h</a> afu, int timeout, <a class="el" href="libocxl_8h.html#structocxl__event">ocxl_event</a> *events, uint16_t event_count)</td></tr>
<tr class="memdesc:ga394155027d19c0646b691080695a92ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check for pending IRQs and other events.  <a href="#ga394155027d19c0646b691080695a92ef">More...</a><br /></td></tr>
<tr class="separator:ga394155027d19c0646b691080695a92ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>These functions allow the allocation and handling of AFU IRQs. </p>
<p>IRQs can be handled either via requesting an array of triggered IRQ handles (via ocxl_afu_check), or by issuing callbacks via ocxl_afu_handle_callbacks().</p>
<p>Each IRQ has an opaque pointer attached, which is communicated to the caller via the event struct passed back from <a class="el" href="group__ocxl__irq.html#ga394155027d19c0646b691080695a92ef" title="Check for pending IRQs and other events. ">ocxl_afu_event_check()</a>. This pointer can be used by the caller to save identifying information against the IRQ. </p>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="gaeef45c328e1d09ae54ab81212c858466"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaeef45c328e1d09ae54ab81212c858466">&#9670;&nbsp;</a></span>ocxl_kernel_event_header</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="group__ocxl__irq.html#gaeef45c328e1d09ae54ab81212c858466">ocxl_kernel_event_header</a> <a class="el" href="group__ocxl__irq.html#gaeef45c328e1d09ae54ab81212c858466">ocxl_kernel_event_header</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="irq_8c_source.html#l00254">254</a> of file <a class="el" href="irq_8c_source.html">irq.c</a>.</p>

</div>
</div>
<a id="ga8d95bfe544a88c1a07c0a8c407db60ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8d95bfe544a88c1a07c0a8c407db60ed">&#9670;&nbsp;</a></span>ocxl_kernel_event_xsl_fault_error</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="group__ocxl__irq.html#ga8d95bfe544a88c1a07c0a8c407db60ed">ocxl_kernel_event_xsl_fault_error</a> <a class="el" href="group__ocxl__irq.html#ga8d95bfe544a88c1a07c0a8c407db60ed">ocxl_kernel_event_xsl_fault_error</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="irq_8c_source.html#l00255">255</a> of file <a class="el" href="irq_8c_source.html">irq.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga394155027d19c0646b691080695a92ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga394155027d19c0646b691080695a92ef">&#9670;&nbsp;</a></span>ocxl_afu_event_check()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int ocxl_afu_event_check </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="libocxl_8h.html#a21bfdc5f2f8df75e22bf12441644d8fb">ocxl_afu_h</a>&#160;</td>
          <td class="paramname"><em>afu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="libocxl_8h.html#structocxl__event">ocxl_event</a> *&#160;</td>
          <td class="paramname"><em>events</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>event_count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check for pending IRQs and other events. </p>
<p>Waits for the AFU to report an event or IRQs. On return, events will be populated with the reported number of events. Each event may be either an AFU event, or an IRQ, which can be determined by checking the value of events[i].type: </p><table class="doxtable">
<tr>
<th>Value </th><th>Action  </th></tr>
<tr>
<td>OCXL_EVENT_IRQ </td><td>An IRQ was triggered, and events[i].irq is populated with the IRQ information identifying which IRQ was triggered </td></tr>
<tr>
<td>OCXL_EVENT_TRANSLATION_FAULT </td><td>An OpenCAPI translation fault error has been issued, that is, the system has been unable to resolve an effective address. Events[i].translation_fault will be populated with the details of the error </td></tr>
</table>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">afu</td><td>the AFU holding the interrupts </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">timeout</td><td>how long to wait (in milliseconds) for interrupts to arrive, set to -1 to wait indefinitely, or 0 to return immediately if no events are available </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">events</td><td>the triggered events (caller allocated) </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">event_count</td><td>the number of triggered events</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the number of events triggered, if this is the same as event_count, you should call ocxl_afu_event_check again </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>if an error occurred </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="libocxl_8h_source.html#l00206">206</a> of file <a class="el" href="libocxl_8h_source.html">libocxl.h</a>.</p>

</div>
</div>
<a id="ga1b9b44339bdb8b94f750bca360c9d679"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1b9b44339bdb8b94f750bca360c9d679">&#9670;&nbsp;</a></span>ocxl_afu_event_check_versioned()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ocxl_afu_event_check_versioned </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="libocxl_8h.html#a21bfdc5f2f8df75e22bf12441644d8fb">ocxl_afu_h</a>&#160;</td>
          <td class="paramname"><em>afu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="libocxl_8h.html#structocxl__event">ocxl_event</a> *&#160;</td>
          <td class="paramname"><em>events</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>event_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>event_api_version</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check for pending IRQs and other events. </p>
<p>This function should not be called directly, instead, use the <a class="el" href="group__ocxl__irq.html#ga394155027d19c0646b691080695a92ef" title="Check for pending IRQs and other events. ">ocxl_afu_event_check()</a> wrapper.</p>
<p>Waits for the AFU to report an event or IRQs. On return, events will be populated with the reported number of events. Each event may be either an AFU event, or an IRQ, which can be determined by checking the value of events[i].type: </p><table class="doxtable">
<tr>
<th>Value </th><th>Action  </th></tr>
<tr>
<td>OCXL_EVENT_IRQ </td><td>An IRQ was triggered, and events[i].irq is populated with the IRQ information identifying which IRQ was triggered </td></tr>
<tr>
<td>OCXL_EVENT_TRANSLATION_FAULT </td><td>An OpenCAPI translation fault error has been issued, that is, the system has been unable to resolve an effective address. Events[i].translation_fault will be populated with the details of the error </td></tr>
</table>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__ocxl__irq.html#ga394155027d19c0646b691080695a92ef" title="Check for pending IRQs and other events. ">ocxl_afu_event_check</a></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">afu</td><td>the AFU holding the interrupts </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">timeout</td><td>how long to wait (in milliseconds) for interrupts to arrive, set to -1 to wait indefinitely, or 0 to return immediately if no events are available </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">events</td><td>the triggered events (caller allocated) </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">event_count</td><td>the number of events that can fit into the events array </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">event_api_version</td><td>the version of the event API that the caller wants to see</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the number of events triggered, if this is the same as event_count, you should call ocxl_afu_event_check again </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>if an error occurred </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="irq_8c_source.html#l00407">407</a> of file <a class="el" href="irq_8c_source.html">irq.c</a>.</p>

</div>
</div>
<a id="gab33cf0e3d48650e6043239c38e0792a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab33cf0e3d48650e6043239c38e0792a8">&#9670;&nbsp;</a></span>ocxl_afu_get_event_fd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ocxl_afu_get_event_fd </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="libocxl_8h.html#a21bfdc5f2f8df75e22bf12441644d8fb">ocxl_afu_h</a>&#160;</td>
          <td class="paramname"><em>afu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a descriptor that will trigger a poll when an AFU event occurs. </p>
<p>When triggered, call ocxl_read_afu_event() to extract the event information.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__ocxl__irq.html#ga394155027d19c0646b691080695a92ef" title="Check for pending IRQs and other events. ">ocxl_afu_event_check()</a></dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>the AFU has been opened</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">afu</td><td>the AFU the IRQ belongs to</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the handle </dd></dl>

<p class="definition">Definition at line <a class="el" href="irq_8c_source.html#l00247">247</a> of file <a class="el" href="irq_8c_source.html">irq.c</a>.</p>

</div>
</div>
<a id="ga9985bc24e0893f4a57730d9582d79609"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9985bc24e0893f4a57730d9582d79609">&#9670;&nbsp;</a></span>ocxl_irq_alloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="libocxl_8h.html#a0a18f33ce24edf75b02184395bb6ea55">ocxl_err</a> ocxl_irq_alloc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="libocxl_8h.html#a21bfdc5f2f8df75e22bf12441644d8fb">ocxl_afu_h</a>&#160;</td>
          <td class="paramname"><em>afu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="libocxl_8h.html#a313387f055a40694c72d5eb1eeb2fe85">ocxl_irq_h</a> *&#160;</td>
          <td class="paramname"><em>irq</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate an IRQ for an open AFU. </p>
<p>Once allocated, the IRQ handle can be retrieved with <a class="el" href="group__ocxl__irq.html#ga4e83b092e7905f25ec39f80370248c61" title="Get the 64 bit IRQ handle for an IRQ. ">ocxl_irq_get_handle()</a>, and written into an AFU specific register in the AFU's MMIO area. The AFU can then trigger the IRQ, which can be listened for with <a class="el" href="group__ocxl__irq.html#ga394155027d19c0646b691080695a92ef" title="Check for pending IRQs and other events. ">ocxl_afu_event_check()</a>, or by obtaining an event descriptor via <a class="el" href="group__ocxl__irq.html#gaab619addebe00f3e8ba66e3b8b72dd8d" title="Get the file descriptor associated with an IRQ. ">ocxl_irq_get_fd()</a> and using it with poll(), select(), etc.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">afu</td><td>the AFU to allocate IRQs for </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">info</td><td>user information to associate with the handle (may be NULL) </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">irq</td><td>the 0 indexed IRQ number that was allocated. This will be monotonically incremented by each subsequent call.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">OCXL_OK</td><td>if the IRQs have been allocated </td></tr>
    <tr><td class="paramname">OCXL_NO_MEM</td><td>if a memory allocation error occurred </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="irq_8c_source.html#l00166">166</a> of file <a class="el" href="irq_8c_source.html">irq.c</a>.</p>

</div>
</div>
<a id="gaab619addebe00f3e8ba66e3b8b72dd8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaab619addebe00f3e8ba66e3b8b72dd8d">&#9670;&nbsp;</a></span>ocxl_irq_get_fd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ocxl_irq_get_fd </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="libocxl_8h.html#a21bfdc5f2f8df75e22bf12441644d8fb">ocxl_afu_h</a>&#160;</td>
          <td class="paramname"><em>afu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="libocxl_8h.html#a313387f055a40694c72d5eb1eeb2fe85">ocxl_irq_h</a>&#160;</td>
          <td class="paramname"><em>irq</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the file descriptor associated with an IRQ. </p>
<p>This descriptor may be used with select/poll to determine if an IRQ is triggered.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">afu</td><td>the AFU the IRQ belongs to </td></tr>
    <tr><td class="paramname">irq</td><td>the IRQ to get the descriptor of</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the handle, or -1 if the descriptor is invalid </dd></dl>

<p class="definition">Definition at line <a class="el" href="irq_8c_source.html#l00222">222</a> of file <a class="el" href="irq_8c_source.html">irq.c</a>.</p>

</div>
</div>
<a id="ga4e83b092e7905f25ec39f80370248c61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4e83b092e7905f25ec39f80370248c61">&#9670;&nbsp;</a></span>ocxl_irq_get_handle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t ocxl_irq_get_handle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="libocxl_8h.html#a21bfdc5f2f8df75e22bf12441644d8fb">ocxl_afu_h</a>&#160;</td>
          <td class="paramname"><em>afu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="libocxl_8h.html#a313387f055a40694c72d5eb1eeb2fe85">ocxl_irq_h</a>&#160;</td>
          <td class="paramname"><em>irq</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the 64 bit IRQ handle for an IRQ. </p>
<p>This handle can be written to the AFU's MMIO area to allow the AFU to trigger the IRQ.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">afu</td><td>the AFU the IRQ belongs to </td></tr>
    <tr><td class="paramname">irq</td><td>the IRQ to get the handle of</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the handle, or 0 if the handle is invalid </dd></dl>

<p class="definition">Definition at line <a class="el" href="irq_8c_source.html#l00201">201</a> of file <a class="el" href="irq_8c_source.html">irq.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
